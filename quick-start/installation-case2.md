# Kafka installation: Case 2

Apache Kafka small installation:

* Version: 2.2.0
* One zookeeper & Three brokers
* Minimal configuration change


## Download & extract

```bash
[example-kafka]$ cd quick-start
[quick-start]$ mkdir kafka-lab
[kafka-lab]$ wget https://archive.apache.org/dist/kafka/2.2.0/kafka_2.12-2.2.0.tgz
[kafka-lab]$ tar zxvf kafka_2.12-2.2.0.tgz
[kafka-lab]$ cd kafka_2.12-2.2.0/
[kafka_2.12-2.2.0]$ ls -l
```


## Prepare broker config files

```bash
[kafka_2.12-2.2.0]$ cp ../../broker*.properties config/
```


## Startup server

```bash
[kafka_2.12-2.2.0]$ bin/zookeeper-server-start.sh config/zookeeper.properties
[kafka_2.12-2.2.0]$ bin/kafka-server-start.sh config/broker1.properties
[kafka_2.12-2.2.0]$ bin/kafka-server-start.sh config/broker2.properties
[kafka_2.12-2.2.0]$ bin/kafka-server-start.sh config/broker3.properties
```



### Topic operation

```bash
### List topics
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --list
### Create topic
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --create \
                        --topic topic1 --partitions 1 --replication-factor 1
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --create \
                        --topic topic2 --partitions 3 --replication-factor 2
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --create \
                        --topic topic3 --partitions 3 --replication-factor 3
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --create \
                        --topic topic4 --partitions 2 --replication-factor 2
### Delete topic
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --delete \
                        --topic topic1
### Describe topic
[kafka_2.12-2.2.0]$ bin/kafka-topics.sh --bootstrap-server localhost:9091 --describe \
                        --topic topic1                        
[kafka_2.12-2.2.0]$ 
```






### Stop servers & reset folder

```bash
# Stop brokers
[kafka_2.12-2.2.0]$ bin/kafka-server-stop.sh

# Stop zookeeper
[kafka_2.12-2.2.0]$ bin/zookeeper-server-stop.sh

# Remove all folders generated by zookeeper & broker
[kafka_2.12-2.2.0]$ rm -rf /tmp/kafka-logs-* /tmp/zookeeper
```